# Singleton

## Singleton パターン

システムの中に１つしか存在しないものをプログラムで表現したいとき、「このクラスのインスタンスはたった1つしか作らないし、作りたくない」  
当然、注意深くプログラミングして、new MyClass()を1回しか実行しないようにすれば、よいが、そうではなく、  
* 指定したクラスのインスタンスが絶対に1つしか存在しないことを保証
* インスタンスが1つしか存在しないことをプログラム上で表現したい
場合にはどうするか  
インスタンスが1つしか存在しないことを保証するパターンを、Singletonパターンと呼ぶ。singletonとは、要素を1つしか持たいない集合である。

## Sample Code Running

```
$ cd src
$ javac singleton/Main.java
$ java singleton.Main
I'm the Static Singleton
```

## Singleton パターンの登場人物
### Singleton役
Singletonパターンには、Singletonの役しか登場しない。Singletonの役は、唯一のインスタンスを得るためのstaticメソッドを持っている。このメソッドはいつも同じインスタンスを返す

## 考えを広げるためのヒント
### なぜ制限を設ける必要があるのか
インスタンスが複数存在すると、インスタンスたちが相互に影響し合って、思いがけないバグを生み出す可能性がある。  
しかし、インスタンスが1つしかないという保証があれば、その前提条件の下でプログラミングができる。

### 唯一のインスタンスはいつ生成されているのか
プログラムの実行開始後、最初にgetInstanceメソッドを呼び出したときにSingletonクラスは初期化される。そして、そのときにstaticフィールドの初期化が行われ、唯一のインスタンスが作られる。

## 関連しているパターン
以下のパターンは、インスタンスが1つである場合が多い
* Abstract Factory パターン
* Builder パターン
* Facade パターン
* Prototype パターン
